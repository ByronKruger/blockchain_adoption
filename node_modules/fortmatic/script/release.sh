#!/usr/bin/env bash

# Building
echo ----- Building -----
npm run build

# Push version tagging
echo ----- Push version -----
npm version minor || exit 1
git push origin master --tags || exit 1

# Temporary change .gitignore for publishing
sed -e 's/^\/dist//g' -e 's/^\/lib//g' ./.gitignore > .temp || exit 1
mv .temp ./.gitignore

# Publish to NPM
echo ----- Publishing -----
npm publish

# Revert local changes
git checkout .